/*! komponentor v1.0.0
 * A jQuery plugin to create modular web apps
 * (c) 2026
 * Released under the MIT License
 */

(()=>{var j=Object.defineProperty;var V=r=>{throw TypeError(r)};var k=(r,i,o)=>i in r?j(r,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[i]=o;var K=(r,i,o)=>k(r,typeof i!="symbol"?i+"":i,o),v=(r,i,o)=>i.has(r)||V("Cannot "+o);var e=(r,i,o)=>(v(r,i,"read from private field"),o?o.call(r):i.get(r)),p=(r,i,o)=>i.has(r)?V("Cannot add the same private member more than once"):i instanceof WeakSet?i.add(r):i.set(r,o),l=(r,i,o,b)=>(v(r,i,"write to private field"),b?b.call(r,o):i.set(r,o),o);(function(r,i){"use strict";var m,d,h,y,f,a,g;if(!i||typeof i.fn!="object")throw new Error("KSimpleViews requires jQuery");const o=r.Handlebars;function b(w){return function(t){return t==null&&(t={}),String(w).replace(/\{\{(\w+(?:\.\w+)*)\}\}/g,(s,n)=>{const c=n.split(".");let u=t;for(const x of c)u=u!=null&&typeof u=="object"?u[x]:void 0;return u!=null?String(u):""})}}function M(w){return o&&typeof o.compile=="function"?o.compile(w):b(w)}class _{constructor(t,s){p(this,m);p(this,d);p(this,h);p(this,y,!1);const n=i(t);if(n.length!==1)throw new Error("KView: el must be a single node (got "+n.length+")");l(this,h,n),l(this,m,M(n[0].outerHTML)),s&&typeof s.onDestroy=="function"&&s.onDestroy(()=>this.destroy())}render(){const t=e(this,h).data("komponent")||null;if(!e(this,y)){try{const s=e(this,m).call(this,e(this,d).props),n=i(s);e(this,h).replaceWith(n),l(this,h,n),e(this,h).data("model",e(this,d)).attr("is","kview")}catch(s){const n=i("<div>Error in KView.render</div>");e(this,h).replaceWith(n),l(this,h,n),console.error("Error in KView.render",s)}t!=null&&e(this,h).data("komponent",t)}}getRoot(){return e(this,h)||i()}setModel(t){e(this,y)||(l(this,d,t),this.render())}destroy(){e(this,y)||(l(this,y,!0),e(this,d)&&typeof e(this,d).unbindView=="function"&&e(this,d).unbindView(this),e(this,h)&&e(this,h).length&&e(this,h).remove(),l(this,d,null),l(this,h,null))}}m=new WeakMap,d=new WeakMap,h=new WeakMap,y=new WeakMap;class E{constructor(t){K(this,"views",[]);p(this,f,{});p(this,a,!1);p(this,g,new Map);l(this,f,t||{})}get props(){return e(this,f)}get data(){return e(this,f)}set data(t){e(this,a)||(l(this,f,t),this._trigger("change",{data:e(this,f)}),this.render())}on(t,s,n){if(typeof s!="function")return this;const c=e(this,g).get(t)||[];return c.push({fn:s,ctx:n||null}),e(this,g).set(t,c),this}off(t,s,n){const c=e(this,g).get(t);return c?(e(this,g).set(t,c.filter(u=>!(u.fn===s&&(n==null||u.ctx===n)))),this):this}trigger(t,s){const n=e(this,g).get(t);if(!n||!n.length)return this;for(const c of n.slice())try{c.fn.call(c.ctx||null,s)}catch(u){console.error("KModel event handler error",t,u)}return this}_trigger(t,s){this.trigger(t,s)}update(t,s){e(this,a)||(e(this,f)[t]=s,this._trigger("change",{name:t,value:s}),this.render())}bindView(t){e(this,a)||(this.views.indexOf(t)===-1&&(this.views.push(t),this._trigger("view:bind",{view:t})),t.setModel(this))}unbindView(t){const s=this.views.indexOf(t);s!==-1&&(this.views.splice(s,1),this._trigger("view:unbind",{view:t}))}unbindAllViews(){this.views.length=0}render(){e(this,a)||this.views.forEach(t=>t.render())}destroy(){e(this,a)||(l(this,a,!0),this._trigger("destroy",{model:this}),this.views.forEach(t=>{t&&typeof t.destroy=="function"&&t.destroy()}),this.views.length=0,e(this,g).clear(),l(this,f,{}))}}f=new WeakMap,a=new WeakMap,g=new WeakMap,r.KModel=E,r.KView=_,r.getKModel=function(w){return i(w).parents("[is=kview]").data("model")}})(typeof window<"u"?window:globalThis,typeof window<"u"&&window.jQuery);})();
//# sourceMappingURL=ksimpleviews.min.js.map
