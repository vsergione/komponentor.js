{
  "version": 3,
  "sources": ["../src/komponentor.js"],
  "sourcesContent": ["/*!\n * Komponentor (single-file)\n * - Tree of components (parent/children), local scan\n * - Destroy cascades\n * - Optional hash router\n * - jQuery optional (used only as helper if present)\n *\n * Public API (minimal):\n *   komponentor.root(host, urlOrOpts)\n *   komponentor.mount(host, urlOrOpts)\n *   komponentor.scan(container?, { parent?, replaceExisting? })\n *   komponentor.route({ outlet, routes, notFound })\n *   komponentor.navigate(hash)\n *   komponentor.intent(urlOrOpts)  -> fluent .data(...).send({ parent })\n *   komponentor.runIntent(url, data, { parent })\n *\n * Component marker:\n *   <div data-komponent=\"/path/to/component.html|id=5|foo=bar\"></div>\n *\n * Intent usage examples:\n *   // From a component (intent becomes part of the branch; destroyed when parent is destroyed)\n *   async function init_komponent(k, data) {\n *     const i = await komponentor.intent(\"modal.html|id=1\").data({ source: k }).send({ parent: k });\n *     // i.ctx.ready, i.data; i may mount DOM via komponentor.mount(...) inside modal's init\n *   }\n *\n *   // Global intent (no parent; not attached to any component tree)\n *   const i = await komponentor.runIntent(\"service/worker.html\", { task: \"sync\" });\n */\n\n(function (global) {\n    \"use strict\";\n  \n    const $ = global.jQuery || null;\n  \n    // ----------------------------\n    // utils\n    // ----------------------------\n    const KEY_INST = \"__kp_instance__\";\n    const KEY_LOCK = \"__kp_mounting__\";\n  \n    function isPlainObject(x) {\n      return x && typeof x === \"object\" && x.constructor === Object;\n    }\n  \n    function uid(prefix = \"\") {\n      return (\n        prefix +\n        Math.random().toString(36).slice(2, 9) +\n        \"_\" +\n        Math.random().toString(36).slice(2, 7)\n      );\n    }\n  \n    function normalizeHost(host) {\n      if (!host) throw new Error(\"Invalid host\");\n      if (typeof host === \"string\") {\n        const el = document.querySelector(host);\n        if (!el) throw new Error(`Host not found: ${host}`);\n        return el;\n      }\n      if ($ && host instanceof $) return host[0];\n      if (host instanceof Element) return host;\n      throw new Error(\"Invalid host type\");\n    }\n  \n    function getInst(el) {\n      return el ? el[KEY_INST] || null : null;\n    }\n    function setInst(el, inst) {\n      el[KEY_INST] = inst;\n    }\n    function clearInst(el, inst) {\n      if (el && el[KEY_INST] === inst) el[KEY_INST] = null;\n    }\n  \n    function lockHost(el, inst) {\n      // lock to prevent concurrent double-mount\n      if (el[KEY_LOCK]) return false;\n      el[KEY_LOCK] = inst || true;\n      return true;\n    }\n    function unlockHost(el, inst) {\n      if (!el) return;\n      if (el[KEY_LOCK] === inst || inst == null) el[KEY_LOCK] = null;\n    }\n  \n    function parseSpec(specText) {\n      // \"/a/b.html|x=1|y=2\" -> { url, data }\n      const out = { url: \"\", data: {} };\n      if (!specText) return out;\n      const parts = String(specText).split(\"|\");\n      out.url = parts.shift() || \"\";\n      parts.forEach((p) => {\n        if (!p) return;\n        const i = p.indexOf(\"=\");\n        if (i === -1) {\n          out.data[p] = null;\n        } else {\n          const k = p.slice(0, i);\n          const v = p.slice(i + 1);\n          out.data[k] = v === \"\" ? \"\" : v;\n        }\n      });\n      return out;\n    }\n\n    // data-komponent -> \"komponent\" (dataset key for exclusion)\n    function markerAttrToDatasetKey(attrName) {\n      if (!attrName || !String(attrName).toLowerCase().startsWith(\"data-\")) return null;\n      return String(attrName)\n        .slice(5)\n        .replace(/-([a-z])/g, (_, c) => c.toUpperCase());\n    }\n\n    // All data-* attributes from element as object (camelCase keys), excluding markerAttr\n    function getDataAttributesFromElement(el, markerAttr) {\n      if (!el || !el.dataset) return {};\n      const excludeKey = markerAttrToDatasetKey(markerAttr);\n      const out = {};\n      for (const key in el.dataset) {\n        if (key === excludeKey) continue;\n        out[key] = el.dataset[key];\n      }\n      return out;\n    }\n  \n    // ----------------------------\n    // EventBus (scoped)\n    // ----------------------------\n    class EventBus {\n      constructor() {\n        this._map = new Map(); // event -> [{fn,ctx}]\n      }\n      on(event, fn, ctx) {\n        if (typeof fn !== \"function\") return;\n        const arr = this._map.get(event) || [];\n        arr.push({ fn, ctx: ctx || null });\n        this._map.set(event, arr);\n      }\n      off(event, fn, ctx) {\n        const arr = this._map.get(event);\n        if (!arr) return;\n        this._map.set(\n          event,\n          arr.filter((l) => !(l.fn === fn && (ctx == null || l.ctx === ctx)))\n        );\n      }\n      emit(event, payload, thisArg) {\n        const arr = this._map.get(event);\n        if (!arr || !arr.length) return;\n        for (const l of arr.slice()) {\n          try {\n            l.fn.call(l.ctx || thisArg || null, payload);\n          } catch (e) {\n            // swallow: event handlers must not crash framework\n            // (caller can enable debug logs in config)\n          }\n        }\n      }\n      clear() {\n        this._map.clear();\n      }\n    }\n  \n    // ----------------------------\n    // Context (kernel)\n    // ----------------------------\n    class Context {\n      constructor(owner, manager) {\n        this.id = uid(\"k_\");\n        this.owner = owner; // Komponent instance\n        this.manager = manager; // Komponentor\n        this.parent = null;\n        this.children = [];\n        this.ready = false;\n        this._destroyed = false;\n  \n        this._state = \"initial\";\n        this._bus = new EventBus();\n        this._destroyers = [];\n  \n        // request lifecycle (1 active per context, abort on new/destroy)\n        this._req = { token: 0, ctrl: null };\n      }\n  \n      get state() {\n        return this._state;\n      }\n      set state(v) {\n        this._state = v;\n        this.trigger(\"state:change\", { state: v, ctx: this });\n        this.trigger(`state:${v}`, this);\n      }\n  \n      on(event, fn, ctx) {\n        this._bus.on(event, fn, ctx || this);\n        return this;\n      }\n      off(event, fn, ctx) {\n        this._bus.off(event, fn, ctx || this);\n        return this;\n      }\n      trigger(event, payload) {\n        this._bus.emit(event, payload, this);\n        return this;\n      }\n  \n      // bubble-up event (cross-branch through common ancestor)\n      emitUp(event, payload) {\n        let p = this.parent;\n        while (p) {\n          p.trigger(event, payload);\n          p = p.parent;\n        }\n        return this;\n      }\n  \n      // root-level event (global within app root)\n      emitRoot(event, payload) {\n        const root = this.manager && this.manager._rootCtx ? this.manager._rootCtx : null;\n        if (root) root.trigger(event, payload);\n        return this;\n      }\n  \n      onDestroy(fn) {\n        if (typeof fn === \"function\") this._destroyers.push(fn);\n        return this;\n      }\n  \n      requestAbort() {\n        try {\n          if (this._req.ctrl) this._req.ctrl.abort();\n        } catch (_) {}\n        this._req.ctrl = null;\n      }\n  \n      // fetch wrapper with stale-guard\n      async requestText(url, fetchOpts = {}) {\n        this._req.token += 1;\n        const t = this._req.token;\n  \n        this.requestAbort();\n        const ctrl = new AbortController();\n        this._req.ctrl = ctrl;\n  \n        const res = await fetch(url, Object.assign({}, fetchOpts, { signal: ctrl.signal }));\n        if (this._destroyed) return null;\n        if (t !== this._req.token) return null; // stale\n        if (!res.ok) throw new Error(`HTTP ${res.status} ${res.statusText}`);\n        const text = await res.text();\n        if (this._destroyed) return null;\n        if (t !== this._req.token) return null;\n        return text;\n      }\n  \n      destroy() {\n        if (this._destroyed) return;\n        this._destroyed = true;\n  \n        this.state = \"destroying\";\n        this.trigger(\"context:destroy\", this);\n  \n        this.requestAbort();\n  \n        // destroy children contexts first (safety)\n        const kids = this.children.slice();\n        this.children = [];\n        for (const ch of kids) {\n          try {\n            if (ch && typeof ch.destroy === \"function\") ch.destroy();\n          } catch (_) {}\n        }\n  \n        // run destroyers in reverse\n        const ds = this._destroyers.slice().reverse();\n        this._destroyers = [];\n        for (const fn of ds) {\n          try {\n            fn(this);\n          } catch (_) {}\n        }\n  \n        this._bus.clear();\n        this.ready = false;\n        this.state = \"destroyed\";\n      }\n    }\n  \n    // ----------------------------\n    // Komponent (node in tree)\n    // ----------------------------\n    class Komponent {\n      constructor(manager, host, opts) {\n        this.manager = manager;\n  \n        this.hostEl = normalizeHost(host);\n        this.$host = $ ? $(this.hostEl) : null;\n  \n        this.opts = manager._normalizeOpts(opts);\n        this.url = this.opts.url || \"\";\n        this.data = this.opts.data || {};\n  \n        this.parent = this.opts.parent || null;\n        this.children = [];\n        this._scanned = false;\n        this._destroyed = false;\n  \n        // mount \"lock\" early (prevents concurrent double-mount)\n        if (!lockHost(this.hostEl, this)) {\n          // if another mount is in-flight, best effort: return existing instance if any\n          const existing = getInst(this.hostEl);\n          if (existing) return existing;\n          // else: allow but it's risky; throw in debug\n          if (manager.config.debug) {\n            throw new Error(\"Host is already mounting (concurrent mount detected).\");\n          }\n        }\n  \n        // attach instance to host early (ownership)\n        setInst(this.hostEl, this);\n  \n        // context\n        this.ctx = new Context(this, manager);\n  \n        // link parent/child (component tree); parent may be Komponent or Intent\n        if (this.parent && (this.parent instanceof Komponent || this.parent instanceof Intent)) {\n          this.parent.children.push(this);\n          this.ctx.parent = this.parent.ctx;\n          this.parent.ctx.children.push(this.ctx);\n        }\n  \n        // cleanup ownership on destroy\n        this.ctx.onDestroy(() => {\n          unlockHost(this.hostEl, this);\n          clearInst(this.hostEl, this);\n        });\n      }\n  \n      // helper: scoped query\n      find(selector) {\n        return this.hostEl.querySelector(selector);\n      }\n\n      findAll(selector) {\n        return Array.from(this.hostEl.querySelectorAll(selector));\n      }\n  \n      // public: mount once (if re-called, destroys first by policy)\n      async mount() {\n        if (this._destroyed) return this;\n  \n        // policy: if mount called again, destroy then remount (user requested)\n        // (manager.mount() also enforces replace if needed)\n        this.ctx.state = \"loading\";\n  \n        try {\n          // overlay\n          if (this.opts.overlay !== false) this.manager.overlay.show(this);\n  \n          // fetch html\n          const url = this.manager._resolveUrl(this.url);\n          const htmlText = await this.ctx.requestText(url, this.manager.config.fetchOptions || {});\n          if (htmlText == null) return this;\n  \n          // parse -> template + init\n          const {fragment, init} = this.manager._parseHtml(htmlText, this);\n          this.ctx.state = \"rendering\";\n  \n          // render into host (replace contents)\n          this.manager._renderIntoHost(this, fragment);\n  \n          this.ctx.state = \"init\";\n          // run init (if exists)\n          if (typeof init === \"function\") {\n            await init(this, this.data);\n          }\n  \n          this.ctx.ready = true;\n          this.ctx.state = \"ready\";\n  \n          // auto-scan children (once per component lifetime)\n          if (this.opts.autoload !== false) {\n            this.scan({ replaceExisting: this.opts.replaceExistingChildren === true });\n          }\n  \n        } catch (e) {\n          this.ctx.state = \"error\";\n          this.manager._renderError(this, e);\n          if (this.manager.config.debug) this.manager.log(\"mount error\", e);\n        } finally {\n          this.manager.overlay.hide(this);\n          unlockHost(this.hostEl, this);\n        }\n  \n        return this;\n      }\n  \n      // scan local branch only\n      scan({ replaceExisting = false } = {}) {\n        if (this._destroyed) return this;\n  \n        // If your model says \"scan can be re-run and must replace\", you can allow it;\n        // but default stays \"once\" to keep branch stable unless explicitly changed.\n        if (this._scanned && replaceExisting !== true) return this;\n        this._scanned = true;\n  \n        this.manager.scan(this.hostEl, {\n          parent: this,\n          replaceExisting,\n        });\n  \n        return this;\n      }\n  \n      // explicit remount policy: destroy then mount\n      async remount() {\n        if (this._destroyed) return this;\n        this.destroy();\n        // create a fresh instance on same host\n        return this.manager.mount(this.hostEl, Object.assign({}, this.opts, { replace: true }));\n      }\n  \n      destroy() {\n        if (this._destroyed) return;\n        this._destroyed = true;\n  \n        // destroy children first (component-level)\n        const kids = this.children.slice();\n        this.children = [];\n        for (const ch of kids) {\n          try {\n            ch.destroy();\n          } catch (_) {}\n        }\n  \n        // context destroy (also destroys ctx children via ctx.children)\n        try {\n          this.ctx.destroy();\n        } catch (_) {}\n  \n        // DOM ownership cleanup:\n        // you said host stays; component clears only its interior\n        try {\n          this.hostEl.innerHTML = \"\";\n        } catch (_) {}\n  \n        // unlink from parent component list (best effort)\n        if (this.parent && this.parent.children) {\n          const i = this.parent.children.indexOf(this);\n          if (i !== -1) this.parent.children.splice(i, 1);\n        }\n      }\n    }\n\n    // ----------------------------\n    // Intent (headless: no DOM, no render, no data-bind)\n    // ----------------------------\n    class Intent {\n      constructor(manager, opts) {\n        this.manager = manager;\n        opts = manager._normalizeIntentOpts(opts);\n        this.url = opts.url || \"\";\n        this.data = opts.data || {};\n        this.parent = opts.parent || null;\n        this.children = [];\n        this.hostEl = null;\n\n        this.ctx = new Context(this, manager);\n\n        if (this.parent && (this.parent instanceof Komponent || this.parent instanceof Intent)) {\n          this.parent.children.push(this);\n          this.ctx.parent = this.parent.ctx;\n          this.parent.ctx.children.push(this.ctx);\n        }\n      }\n\n      async run() {\n        if (this.ctx._destroyed) return this;\n        if (!this.url) {\n          this.ctx.state = \"error\";\n          if (this.manager.config.debug) this.manager.log(\"intent run: no url\");\n          return this;\n        }\n        this.ctx.state = \"loading\";\n        if (this.manager.config.debug) this.manager.log(\"intent run\", this.url);\n\n        try {\n          const url = this.manager._resolveUrl(this.url);\n          const htmlText = await this.ctx.requestText(url, this.manager.config.fetchOptions || {});\n          if (htmlText == null) return this;\n          const { fragment, init } = this.manager._parseHtml(htmlText, this);\n          this.hostEl = fragment.cloneNode(true);\n          console.log(\"hostEl\",this.hostEl);\n          //document.body.appendChild(this.hostEl);\n          this.ctx.state = \"init\";\n          if (typeof init === \"function\") {\n            await init(this, this.data);\n          }\n          this.ctx.ready = true;\n          this.ctx.state = \"ready\";\n        } catch (e) {\n          this.ctx.state = \"error\";\n          if (this.manager.config.debug) this.manager.log(\"intent run error\", this.url, e);\n        }\n        return this;\n      }\n\n      destroy() {\n        const kids = this.children.slice();\n        this.children = [];\n        for (const ch of kids) {\n          try {\n            if (ch && typeof ch.destroy === \"function\") ch.destroy();\n          } catch (_) {}\n        }\n        try {\n          this.ctx.destroy();\n        } catch (_) {}\n        if (this.parent && this.parent.children) {\n          const i = this.parent.children.indexOf(this);\n          if (i !== -1) this.parent.children.splice(i, 1);\n        }\n      }\n    }\n\n    // ----------------------------\n    // HashRouter (optional)\n    // ----------------------------\n    class HashRouter {\n      constructor(manager) {\n        this.manager = manager;\n        this._started = false;\n        this._handler = null;\n        this.routes = []; // [{ pattern, keys, regex, url }]\n        this.outlet = null;\n        this.notFound = null;\n      }\n  \n      // \"#/users/:id\" -> regex + keys\n      _compile(pattern) {\n        const keys = [];\n        let rx = \"^\" + pattern.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n        rx = rx.replace(/\\\\:([a-zA-Z0-9_]+)/g, (_, k) => {\n          keys.push(k);\n          return \"([^/]+)\";\n        });\n        rx += \"$\";\n        return { regex: new RegExp(rx), keys };\n      }\n  \n      configure({ outlet = \"#app\", routes = {}, notFound = null } = {}) {\n        this.outlet = outlet;\n        this.notFound = notFound;\n        this.routes = [];\n  \n        // accept object map or array\n        if (Array.isArray(routes)) {\n          routes.forEach((r) => this.add(r.path, r.url));\n        } else {\n          Object.entries(routes).forEach(([path, url]) => this.add(path, url));\n        }\n        return this;\n      }\n  \n      add(pathPattern, url) {\n        const c = this._compile(pathPattern);\n        this.routes.push({ pattern: pathPattern, keys: c.keys, regex: c.regex, url });\n        return this;\n      }\n  \n      match(hash) {\n        for (const r of this.routes) {\n          const m = r.regex.exec(hash);\n          if (!m) continue;\n          const params = {};\n          r.keys.forEach((k, i) => (params[k] = m[i + 1]));\n          return { url: r.url, route: { hash, params } };\n        }\n        return null;\n      }\n  \n      start() {\n        if (this._started) return;\n        this._started = true;\n  \n        this._handler = () => {\n          const hash = global.location.hash || \"#/\";\n          const match = this.match(hash);\n  \n          const outletEl = normalizeHost(this.outlet);\n          // replace root component on route change\n          if (!match) {\n            if (this.notFound) {\n              this.manager.mount(outletEl, {\n                url: this.notFound,\n                data: { route: { hash, params: {} } },\n                replace: true,\n                parent: null,\n              });\n            }\n            return;\n          }\n  \n          this.manager.mount(outletEl, {\n            url: match.url,\n            data: { route: match.route },\n            replace: true,\n            parent: null,\n          });\n        };\n  \n        global.addEventListener(\"hashchange\", this._handler);\n        global.addEventListener(\"load\", this._handler);\n        this._handler();\n      }\n  \n      stop() {\n        if (!this._started) return;\n        this._started = false;\n        if (this._handler) {\n          global.removeEventListener(\"hashchange\", this._handler);\n          global.removeEventListener(\"load\", this._handler);\n        }\n        this._handler = null;\n      }\n  \n      navigate(hash) {\n        global.location.hash = hash;\n      }\n    }\n  \n    // ----------------------------\n    // Komponentor (manager / API)\n    // ----------------------------\n    class Komponentor {\n      constructor(config = {}) {\n        this.config = Object.assign(\n          {\n            debug: false,\n            baseUrl: null,\n            // overlay:\n            overlayClass: \"komponent-overlay\",\n            overlayHtml:\n              \"<div style='position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)'>Loading</div>\",\n            // scan:\n            markerAttr: \"data-komponent\",\n            // error rendering:\n            errorHtml: (url, err) =>\n              `<div style=\"padding:8px;border:1px solid #c00;background:#fee\">Failed to load <b>${url}</b></div>`,\n          },\n          config\n        );\n  \n        this._root = null;    // Komponent\n        this._rootCtx = null; // Context (for root bus convenience)\n  \n        this.router = new HashRouter(this);\n  \n        // overlay service\n        this.overlay = {\n          show: (k) => this._overlayShow(k),\n          hide: (k) => this._overlayHide(k),\n        };\n      }\n  \n      log(...args) {\n        if (this.config.debug) console.log(\"[komponentor]\", ...args);\n      }\n  \n      _normalizeOpts(opts) {\n        if (typeof opts === \"string\") {\n          return { url: opts, data: {}, replace: false, autoload: true, overlay: true };\n        }\n        if (!isPlainObject(opts)) {\n          return { url: \"\", data: {}, replace: false, autoload: true, overlay: true };\n        }\n        const o = Object.assign(\n          {\n            url: \"\",\n            data: {},\n            replace: false,\n            autoload: true,  // default: scan data-komponent children after mount\n            overlay: true,\n            parent: null,\n          },\n          opts\n        );\n        // allow \"url|x=1|y=2\" in url field too\n        if (typeof o.url === \"string\" && o.url.includes(\"|\")) {\n          const parsed = parseSpec(o.url);\n          o.url = parsed.url;\n          o.data = Object.assign({}, parsed.data, o.data || {});\n        }\n        return o;\n      }\n\n      /** Intent opts only: url + data from spec and programmatic. No DOM/dataset. urlSpecData < programmaticData. */\n      _normalizeIntentOpts(urlOrOpts) {\n        let url = \"\";\n        let data = {};\n        let parent = null;\n        if (typeof urlOrOpts === \"string\") {\n          const parsed = parseSpec(urlOrOpts);\n          url = parsed.url;\n          data = Object.assign({}, parsed.data);\n        } else if (isPlainObject(urlOrOpts)) {\n          const o = urlOrOpts;\n          url = o.url || \"\";\n          const fromUrl = url && url.includes(\"|\") ? parseSpec(url).data : {};\n          data = Object.assign({}, fromUrl, o.data || {});\n          parent = o.parent != null ? o.parent : null;\n        }\n        return { url, data, parent };\n      }\n  \n      _resolveUrl(url) {\n        if (!url) return url;\n        if (this.config.baseUrl && url[0] === \"/\") return this.config.baseUrl + url;\n        return url;\n      }\n  \n      // parse HTML string into DOM fragment + init function (scoped, no global pollution)\n      _parseHtml(htmlText, komponent) {\n        // Put into template, strip <script>, keep scripts text, return fragment\n        const t = document.createElement(\"template\");\n        t.innerHTML = String(htmlText);\n  \n        const scripts = Array.from(t.content.querySelectorAll(\"script\"));\n        const code = scripts.map((s) => s.textContent || \"\").join(\"\\n\");\n        scripts.forEach((s) => s.remove());\n  \n        const fragment = t.content; // DocumentFragment\n  \n        // init extraction:\n        // Convention: scripts may define function init_komponent(k, data) { ... }\n        // We execute scripts in an isolated scope and then grab init_komponent if defined.\n        let init = null;\n        if (code.trim()) {\n          try {\n            // NOTE: This runs arbitrary code from fetched HTML. That's your current model.\n            // Keep it isolated (no global init function).\n            const fn = new Function(\n              \"komponent\",\n              \"data\",\n              \"komponentor\",\n              `\n              \"use strict\";\n              ${code}\n              // if code declared function init_komponent, it will overwrite our local binding only if it was declared as var/let assignment.\n              // to support \"function init_komponent(...) {}\", we detect it via Function constructor scope:\n              return (typeof init_komponent === \"function\") ? init_komponent : null;\n            `\n            );\n            // run once to obtain init function; then call later\n            const maybe = fn(komponent, komponent.data, this);\n            if (typeof maybe === \"function\") init = maybe;\n          } catch (e) {\n            if (this.config.debug) this.log(\"init parse error\", e);\n          }\n        }\n        return { fragment, init };\n      }\n  \n      _renderIntoHost(komponent, fragment) {\n        const host = komponent.hostEl;\n        // clear owned content\n        host.innerHTML = \"\";\n        // append fragment nodes\n        host.appendChild(fragment.cloneNode(true));\n      }\n  \n      _renderError(komponent, err) {\n        try {\n          komponent.hostEl.innerHTML = this.config.errorHtml(komponent.url, err);\n        } catch (_) {}\n      }\n  \n      _overlayShow(k) {\n        const host = k.hostEl;\n        if (!host) return;\n  \n        // If host isn't positioned, overlay absolute positioning is messy; simplest:\n        // create overlay as first child with position:relative wrapper.\n        // Minimal, predictable.\n        // You can replace this later with a better overlay implementation.\n  \n        // avoid duplicate overlay\n        if (k._overlayEl && k._overlayEl.parentNode) return;\n  \n        const ov = document.createElement(\"div\");\n        ov.className = this.config.overlayClass;\n        ov.innerHTML = this.config.overlayHtml;\n  \n        ov.style.position = \"relative\";\n        ov.style.minHeight = \"30px\";\n        ov.style.border = \"1px dashed silver\";\n        ov.style.background = \"#eee\";\n        ov.style.zIndex = \"999999\";\n  \n        k._overlayEl = ov;\n        host.insertBefore(ov, host.firstChild);\n      }\n  \n      _overlayHide(k) {\n        const ov = k._overlayEl;\n        if (ov && ov.parentNode) ov.parentNode.removeChild(ov);\n        k._overlayEl = null;\n      }\n  \n      // ---------- Public API ----------\n      root(host, urlOrOpts) {\n        const el = normalizeHost(host);\n        // destroy existing root if any\n        if (this._root) {\n          try {\n            this._root.destroy();\n          } catch (_) {}\n          this._root = null;\n          this._rootCtx = null;\n        }\n        const k = this.mount(el, Object.assign({}, this._normalizeOpts(urlOrOpts), { replace: true, parent: null }));\n        this._root = k;\n        this._rootCtx = k && k.ctx ? k.ctx : null;\n        return k;\n      }\n  \n      mount(host, urlOrOpts) {\n        const el = normalizeHost(host);\n        const opts = this._normalizeOpts(urlOrOpts);\n  \n        // policy requested by you:\n        // - if mounting onto a host that already has a component, destroy first\n        const existing = getInst(el);\n        \n        if (existing && existing instanceof Komponent && opts.replace) existing.destroy();\n        if (existing && !opts.replace) return existing;\n  \n        // create new component\n        const k = new Komponent(this, el, opts);\n  \n        // run mount async (fire-and-forget); user can await if they want:\n        // return k.mount() would change API; so keep instance return and let user await k.mount() optionally.\n        k.mount();\n  \n        return k;\n      }\n  \n      scan(container = document.body, { parent = null, replaceExisting = false } = {}) {\n        const root = normalizeHost(container);\n        const attr = this.config.markerAttr;\n\n        const nodes = Array.from(root.querySelectorAll(`[${attr}]`));\n        for (const node of nodes) {\n          const spec = node.getAttribute(attr) || \"\";\n          const parsed = parseSpec(spec);\n          const dataFromAttrs = getDataAttributesFromElement(node, attr);\n          const data = Object.assign({}, parsed.data, dataFromAttrs);\n\n          const existing = getInst(node);\n          if (existing && !replaceExisting) continue;\n\n          if (existing && replaceExisting) {\n            try {\n              existing.destroy();\n            } catch (_) {}\n          }\n\n          this.mount(node, {\n            url: parsed.url,\n            data,\n            parent: parent,\n            replace: true,\n          });\n        }\n      }\n  \n      route({ outlet = \"#app\", routes = {}, notFound = null } = {}) {\n        this.router.configure({ outlet, routes, notFound }).start();\n      }\n  \n      navigate(hash) {\n        this.router.navigate(hash);\n      }\n\n      /** Fluent intent builder. .data(objOrKey, val).send({ parent }) -> Intent (after run). */\n      intent(urlOrOpts) {\n        const manager = this;\n        const opts = manager._normalizeIntentOpts(urlOrOpts);\n        let _url = opts.url;\n        let _data = Object.assign({}, opts.data);\n        return {\n          data(objOrKey, val) {\n            console.log(\"data\",objOrKey, val);\n            if (objOrKey != null && typeof objOrKey === \"object\") {\n              console.log(\"objOrKey\",objOrKey);\n              Object.assign(_data, objOrKey);\n            } else if (objOrKey != null) {\n              _data[objOrKey] = val;\n            }\n            return this;\n          },\n          async send({ parent } = {}) {\n            const intent = new Intent(manager, { url: _url, data: _data, parent });\n            await intent.run();\n            return intent;\n          },\n        };\n      }\n\n      /** Convenience: runIntent(url, data, { parent }) -> Intent (after run). */\n      async runIntent(url, data, { parent } = {}) {\n        const opts = this._normalizeIntentOpts({ url, data });\n        const intent = new Intent(this, { url: opts.url, data: opts.data, parent });\n        await intent.run();\n        return intent;\n      }\n    }\n  \n    // ----------------------------\n    // expose namespace\n    // ----------------------------\n    const K = global.komponentor = global.komponentor || {};\n    // If user already has an instance, keep it; else create default instance\n    if (!(K instanceof Komponentor)) {\n      const inst = new Komponentor(K && isPlainObject(K) ? K : {});\n      // copy instance onto global\n      global.komponentor = inst;\n    }\n  \n    // also expose classes for power users\n    global.komponentor.Komponentor = Komponentor;\n    global.komponentor.Komponent = Komponent;\n    global.komponentor.Context = Context;\n    global.komponentor.HashRouter = HashRouter;\n    global.komponentor.Intent = Intent;\n  \n  })(window);\n  "],
  "mappings": "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",
  "names": []
}
