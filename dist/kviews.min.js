/*! komponentor v1.0.0
 * A jQuery plugin to create modular web apps
 * (c) 2026 
 * Released under the MIT License
 */
!function(e,t){"use strict";if(!t||"object"!=typeof t.fn)throw new Error("kviews requires jQuery");const i=e.Handlebars;function s(e){return i&&"function"==typeof i.compile?i.compile(e):function(e){return function(t){return null==t&&(t={}),String(e).replace(/\{\{(\w+(?:\.\w+)*)\}\}/g,((e,i)=>{const s=i.split(".");let r=t;for(const e of s)r=null!=r&&"object"==typeof r?r[e]:void 0;return null!=r?String(r):""}))}}(e)}e.KModel=class{views=[];#e={};#t=!1;#i=new Map;get props(){return this.#e}get data(){return this.#e}set data(e){this.#t||(this.#e=e,this._trigger("change",{data:this.#e}),this.render())}constructor(e){this.#e=e||{}}on(e,t,i){if("function"!=typeof t)return this;const s=this.#i.get(e)||[];return s.push({fn:t,ctx:i||null}),this.#i.set(e,s),this}off(e,t,i){const s=this.#i.get(e);return s?(this.#i.set(e,s.filter((e=>!(e.fn===t&&(null==i||e.ctx===i))))),this):this}trigger(e,t){const i=this.#i.get(e);if(!i||!i.length)return this;for(const s of i.slice())try{s.fn.call(s.ctx||null,t)}catch(t){console.error("KModel event handler error",e,t)}return this}_trigger(e,t){this.trigger(e,t)}update(e,t){this.#t||(this.#e[e]=t,this._trigger("change",{name:e,value:t}),this.render())}bindView(e){this.#t||(-1===this.views.indexOf(e)&&(this.views.push(e),this._trigger("view:bind",{view:e})),e.setModel(this))}unbindView(e){const t=this.views.indexOf(e);-1!==t&&(this.views.splice(t,1),this._trigger("view:unbind",{view:e}))}unbindAllViews(){this.views.length=0}render(){this.#t||this.views.forEach((e=>e.render()))}destroy(){this.#t||(this.#t=!0,this._trigger("destroy",{model:this}),this.views.forEach((e=>{e&&"function"==typeof e.destroy&&e.destroy()})),this.views.length=0,this.#i.clear(),this.#e={})}},e.KView=class{#s;#r;#n;#t=!1;constructor(e,i){const r=t(e);if(1!==r.length)throw new Error("KView: el must be a single node (got "+r.length+")");this.#n=r,this.#s=s(r[0].outerHTML),i&&"function"==typeof i.onDestroy&&i.onDestroy((()=>this.destroy()))}render(){const e=this.#n.data("komponent")||null;if(!this.#t){try{const e=this.#s(this.#r.props),i=t(e);this.#n.replaceWith(i),this.#n=i,this.#n.data("model",this.#r).attr("is","kview")}catch(e){const i=t("<div>Error in KView.render</div>");this.#n.replaceWith(i),this.#n=i,console.error("Error in KView.render",e)}null!=e&&this.#n.data("komponent",e)}}getRoot(){return this.#n||t()}setModel(e){this.#t||(this.#r=e,this.render())}destroy(){this.#t||(this.#t=!0,this.#r&&"function"==typeof this.#r.unbindView&&this.#r.unbindView(this),this.#n&&this.#n.length&&this.#n.remove(),this.#r=null,this.#n=null)}},e.getKModel=function(e){return t(e).parents("[is=kview]").data("model")}}("undefined"!=typeof window?window:globalThis,"undefined"!=typeof window&&window.jQuery);
//# sourceMappingURL=kviews.min.js.map
